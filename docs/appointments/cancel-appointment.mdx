---
title: "Cancelar Cita"
description: "C√≥mo cancelar una cita existente y liberar el horario"
---

# Cancelar Cita

Aprende a cancelar citas ya agendadas de forma correcta, manteniendo el historial para auditor√≠a y reportes.

## Cancelar vs Eliminar: ¬øCu√°l es la Diferencia?

<CardGroup cols={2}>
  <Card title="Cancelar (Soft Delete)" icon="circle-xmark" color="#0D9373">
    **Recomendado**: La cita se marca como "Cancelled" pero permanece en el sistema para auditor√≠a y reportes.
  </Card>
  <Card title="Eliminar (Hard Delete)" icon="trash" color="#DC2626">
    **No disponible**: El sistema NO permite eliminar citas. Siempre usa "Cancelar" para mantener el historial.
  </Card>
</CardGroup>

<Warning>
**Importante**: El sistema usa un patr√≥n de "soft delete" (borrado l√≥gico). Las citas canceladas permanecen en la base de datos con estado `CANCELLED` pero no se eliminan f√≠sicamente. Esto permite:
- Auditor√≠a completa de cambios
- Reportes hist√≥ricos precisos
- An√°lisis de no-show y cancelaciones
- Trazabilidad para cumplimiento normativo
</Warning>

<Tip>
Cancelar una cita **libera inmediatamente** el horario para que otros pacientes puedan agendarlo.
</Tip>

---

## Formas de Cancelar una Cita

<Steps>
  <Step title="M√©todo 1: Desde el Calendario">
    La forma m√°s r√°pida de cancelar una cita es directamente desde el calendario.

    1. Navega a **Citas ‚Üí Calendario** en el men√∫ lateral
    2. Haz click en la cita que deseas cancelar
    3. Se abrir√° un modal con los detalles de la cita
    4. Haz click en el bot√≥n **"Cancelar Cita"** (icono ‚ùå)
    5. Confirma la cancelaci√≥n en el modal de confirmaci√≥n

    <Note>
    El calendario actualizar√° la vista inmediatamente, moviendo la cita a la secci√≥n de citas canceladas.
    </Note>
  </Step>

  <Step title="M√©todo 2: Desde B√∫squeda de Paciente">
    Si no sabes cu√°ndo es la cita, puedes buscar al paciente primero.

    1. Ve a **Pacientes ‚Üí Buscar Paciente** en el men√∫ lateral
    2. Busca por nombre o tel√©fono (ej: `+34612345678`)
    3. Una vez encontrado el paciente, ver√°s la lista de sus citas
    4. Haz click en la cita que deseas cancelar
    5. Se abrir√° el modal de detalles
    6. Haz click en **"Cancelar Cita"** y confirma

    <Tip>
    Este m√©todo es √∫til cuando el paciente llama para cancelar y no sabes la fecha exacta de su cita.
    </Tip>
  </Step>

  <Step title="M√©todo 3: Desde Lista de Citas">
    Si necesitas ver todas las citas en formato lista (no calendario):

    1. Ve a **Citas ‚Üí Todas las Citas** en el men√∫ lateral
    2. Usa los filtros para encontrar la cita:
       - Por fecha
       - Por proveedor
       - Por estado (Pending, Confirmed)
       - Por paciente
    3. Haz click en la cita que deseas cancelar
    4. Se abrir√° el modal de detalles
    5. Haz click en **"Cancelar Cita"** y confirma

    <Note>
    La vista de lista es √∫til cuando buscas citas por criterios m√∫ltiples (ej: "todas las citas del Dr. P√©rez en noviembre").
    </Note>
  </Step>
</Steps>

---

## Proceso de Cancelaci√≥n

<Steps>
  <Step title="Confirmar Antes de Cancelar">
    Cuando hagas click en **"Cancelar Cita"** (despu√©s de ver el modal de detalles), se abrir√° un modal de confirmaci√≥n.

    <Frame>
      <img src="/images/screenshots/appointments_cancel_01_confirm_modal.png" alt="Modal de confirmaci√≥n de cancelaci√≥n de cita" />
    </Frame>

    **El modal muestra**:
    - Nombre del paciente
    - Fecha y hora de la cita
    - Servicio agendado
    - Proveedor asignado

    **Campo opcional: Raz√≥n de cancelaci√≥n**

    Aunque es opcional, es **altamente recomendado** ingresar una raz√≥n:
    - "Paciente cancel√≥ por enfermedad"
    - "Paciente no pudo asistir por trabajo"
    - "Cancelaci√≥n administrativa"
    - "Cierre inesperado de la cl√≠nica"

    <Tip>
    Registrar la raz√≥n ayuda a entender patrones de cancelaci√≥n y mejorar la gesti√≥n de citas.
    </Tip>
  </Step>

  <Step title="Clic en Confirmar Cancelaci√≥n">
    Una vez que hayas revisado los datos y (opcionalmente) ingresado la raz√≥n:

    1. Haz click en **"Confirmar Cancelaci√≥n"**
    2. El sistema validar√° que tienes permisos para cancelar
    3. Recibir√°s una notificaci√≥n verde confirmando la cancelaci√≥n

    <Warning>
    **Esta acci√≥n es irreversible**. No puedes "descancelar" una cita. Si te equivocas, deber√°s crear una nueva cita desde cero.
    </Warning>
  </Step>

  <Step title="Notificaci√≥n Autom√°tica al Paciente">
    Si tienes WhatsApp configurado y activo, el sistema **autom√°ticamente**:

    1. Env√≠a un mensaje al paciente notific√°ndole la cancelaci√≥n
    2. El mensaje incluye:
       - Fecha y hora de la cita cancelada
       - Nombre del servicio
       - Mensaje de disculpa (si aplica)
       - Opci√≥n de re-agendar

    **Ejemplo de mensaje**:
    > "Hola Mar√≠a, lamentamos informarte que tu cita del 15/01/2026 a las 10:00 para Corte de pelo ha sido cancelada. Si deseas re-agendar, responde a este mensaje y te ayudaremos. Gracias."

    <Note>
    Si WhatsApp no est√° activo, deber√°s contactar al paciente manualmente (por tel√©fono o email).
    </Note>
  </Step>
</Steps>

---

## Qu√© Sucede al Cancelar una Cita

<CardGroup cols={2}>
  <Card title="Estado de la Cita" icon="circle-xmark" color="#DC2626">
    El estado cambia autom√°ticamente de `PENDING` o `CONFIRMED` a `CANCELLED`. La cita permanece en la base de datos pero marcada como cancelada.
  </Card>

  <Card title="Horario Liberado" icon="calendar-check" color="#0D9373">
    El horario se libera **inmediatamente** y queda disponible para que otros pacientes puedan agendarlo (manualmente o v√≠a WhatsApp).
  </Card>

  <Card title="Historial Preservado" icon="clock-rotate-left" color="#6B7280">
    La cita permanece en el historial del paciente y en la auditor√≠a del sistema para an√°lisis y reportes.
  </Card>

  <Card title="Notificaci√≥n Enviada" icon="message" color="#25D366">
    Si WhatsApp est√° activo, se env√≠a autom√°ticamente un mensaje al paciente notific√°ndole la cancelaci√≥n.
  </Card>

  <Card title="Audit Log Registrado" icon="clipboard-list" color="#F59E0B">
    El sistema registra autom√°ticamente la cancelaci√≥n en `audit_logs` con:
    - Usuario que cancel√≥
    - Fecha/hora de cancelaci√≥n
    - IP del usuario
    - Raz√≥n de cancelaci√≥n (si se ingres√≥)
  </Card>

  <Card title="WebSocket Broadcast" icon="tower-broadcast" color="#8B5CF6">
    Se emite un evento en tiempo real a todos los usuarios conectados para actualizar calendarios y vistas autom√°ticamente.
  </Card>
</CardGroup>

<Info>
**¬øQu√© NO sucede al cancelar?**
- ‚ùå La cita NO se elimina de la base de datos
- ‚ùå NO afecta el l√≠mite de tu plan de suscripci√≥n (citas canceladas **no cuentan** en el l√≠mite)
- ‚ùå NO se puede recuperar (debes crear una nueva cita si te equivocaste)
</Info>

---

## Cancelaciones M√∫ltiples

<Note>
Esta funcionalidad puede estar o no disponible dependiendo de tu versi√≥n del sistema.
</Note>

En algunos casos, necesitar√°s cancelar **varias citas a la vez**:

<AccordionGroup>
  <Accordion title="Caso de Uso: Cierre Inesperado de la Cl√≠nica" icon="door-closed">
    Si tu cl√≠nica debe cerrar inesperadamente (ej: emergencia, corte de luz, enfermedad del personal):

    **Opci√≥n 1: Cancelar Cita por Cita**
    - Busca cada cita del d√≠a en el calendario
    - Cancela una por una siguiendo el proceso normal
    - Ventaja: Puedes personalizar el mensaje para cada paciente

    **Opci√≥n 2: Crear un Cierre Programado (Recomendado)**
    1. Ve a **Configuraci√≥n ‚Üí Cierres**
    2. Crea un cierre para el d√≠a/horario espec√≠fico
    3. El sistema **autom√°ticamente** marca como no disponibles todos los slots afectados
    4. Puedes optar por:
       - Cancelar autom√°ticamente las citas afectadas
       - Enviar notificaci√≥n masiva a pacientes

    <Tip>
    [Aprende m√°s sobre Cierres Programados](/configuration/closures)
    </Tip>
  </Accordion>

  <Accordion title="Caso de Uso: Cancelar Todas las Citas de un Proveedor" icon="user-doctor-hair-long">
    Si un proveedor se enferma o no puede trabajar ese d√≠a:

    **M√©todo 1: Usar Filtro de Proveedor**
    1. Ve a **Citas ‚Üí Todas las Citas**
    2. Filtra por proveedor espec√≠fico
    3. Filtra por fecha (ej: hoy o ma√±ana)
    4. Cancela cada cita manualmente

    **M√©todo 2: Crear Cierre para el Proveedor**
    1. Ve a **Configuraci√≥n ‚Üí Cierres**
    2. Crea un cierre **espec√≠fico del proveedor** para el d√≠a/horario
    3. El sistema bloquear√° los slots de ese proveedor
    4. Opcionalmente cancela las citas existentes

    <Note>
    Los cierres de proveedor NO afectan a otros proveedores. Solo bloquean los slots del proveedor espec√≠fico.
    </Note>
  </Accordion>

  <Accordion title="Caso de Uso: Cancelar Citas de un D√≠a Festivo" icon="calendar-days">
    Si olvidaste configurar un d√≠a festivo con anticipaci√≥n:

    **Soluci√≥n Recomendada**:
    1. Ve a **Configuraci√≥n ‚Üí Cierres**
    2. Crea un cierre para el d√≠a festivo
    3. Marca la opci√≥n **"Cancelar citas existentes"**
    4. El sistema:
       - Cancelar√° autom√°ticamente todas las citas del d√≠a
       - Enviar√° notificaciones a todos los pacientes afectados
       - Registrar√° la raz√≥n de cancelaci√≥n ("D√≠a festivo")

    <Warning>
    Configura los d√≠as festivos con anticipaci√≥n (al menos 2 semanas) para evitar cancelaciones de √∫ltimo momento.
    </Warning>
  </Accordion>
</AccordionGroup>

---

## Casos Especiales

<AccordionGroup>
  <Accordion title="¬øPuedo cancelar citas pasadas?" icon="clock">
    **S√≠**, t√©cnicamente puedes cancelar citas pasadas, pero **no es recomendado**.

    **Mejor pr√°ctica**:
    - Si la cita ya ocurri√≥: Marca como **"Completed"** (Completada)
    - Si el paciente no asisti√≥: Marca como **"No Show"** (No presentado)
    - Solo cancela citas pasadas si fue una **cancelaci√≥n administrativa** (ej: error de agenda)

    **Raz√≥n**: Marcar correctamente el estado permite an√°lisis precisos de:
    - Tasa de no-show
    - Tasa de cancelaciones vs citas completadas
    - Reportes de facturaci√≥n

    <Tip>
    Para cambiar el estado de una cita pasada, usa **Modificar Cita** ‚Üí **Cambiar Estado**.
    </Tip>
  </Accordion>

  <Accordion title="¬øPuedo recuperar una cita cancelada?" icon="rotate-left">
    **No**, las citas canceladas **no se pueden recuperar**.

    **Si cancelaste por error**:
    1. Crea una nueva cita desde cero
    2. Usa los mismos datos (paciente, servicio, fecha/hora)
    3. El sistema crear√° una nueva cita con un nuevo ID

    **Diferencias**:
    - ‚ùå El historial no se une (ser√°n dos citas separadas)
    - ‚ùå El ID de la cita ser√° diferente
    - ‚úÖ Pero el horario y datos ser√°n los mismos

    <Note>
    El sistema NO permite "descancelar" para mantener la integridad del audit trail (historial de auditor√≠a).
    </Note>
  </Accordion>

  <Accordion title="¬øEl paciente recibe notificaci√≥n autom√°tica?" icon="message">
    **Depende de si tienes WhatsApp activo**:

    **Si WhatsApp est√° activo** ‚úÖ:
    - El sistema env√≠a autom√°ticamente un mensaje al paciente
    - El mensaje incluye fecha/hora cancelada y servicio
    - El paciente puede responder para re-agendar

    **Si WhatsApp NO est√° activo** ‚ùå:
    - Debes contactar al paciente **manualmente**:
      - Por tel√©fono (llamada)
      - Por email (si tienes su email)
      - Por SMS (si usas otro servicio)

    <Tip>
    Verifica el estado de env√≠o del mensaje WhatsApp en **Logs ‚Üí Mensajes WhatsApp** (si tienes acceso).
    </Tip>
  </Accordion>

  <Accordion title="¬øAfecta a mi l√≠mite de plan de suscripci√≥n?" icon="credit-card">
    **No**, las citas canceladas **NO cuentan** en el l√≠mite de tu plan.

    **C√≥mo funciona el conteo**:
    - ‚úÖ **Citas Completadas**: Cuentan en el l√≠mite
    - ‚úÖ **Citas Confirmadas**: Cuentan en el l√≠mite
    - ‚úÖ **Citas Pending**: Cuentan en el l√≠mite
    - ‚ùå **Citas Canceladas**: **NO** cuentan en el l√≠mite
    - ‚ùå **Citas No-Show**: **NO** cuentan en el l√≠mite (configurable)

    **Ejemplo**:
    - Plan STARTER: 50 citas/mes
    - Citas creadas: 60
    - Citas canceladas: 15
    - **Citas facturables**: 60 - 15 = 45 ‚úÖ (Dentro del l√≠mite)

    <Note>
    Puedes verificar tu consumo actual en **Suscripci√≥n ‚Üí Uso del Plan**.
    </Note>
  </Accordion>

  <Accordion title="¬øSe puede cancelar autom√°ticamente si el paciente no confirma?" icon="robot">
    **S√≠**, si configuras recordatorios y reglas de auto-cancelaci√≥n:

    **Flujo de Auto-Cancelaci√≥n**:
    1. **T-24h**: Sistema env√≠a recordatorio WhatsApp al paciente
    2. **T-12h**: Si el paciente NO responde, se env√≠a segundo recordatorio
    3. **T-2h**: Si el paciente NO confirma, el sistema **autom√°ticamente** cancela la cita
    4. Se env√≠a notificaci√≥n al paciente: "Tu cita fue cancelada por falta de confirmaci√≥n"

    **Configuraci√≥n**:
    - Ve a **Configuraci√≥n ‚Üí Recordatorios ‚Üí Auto-Cancelaci√≥n**
    - Activa **"Cancelar citas no confirmadas"**
    - Define el tiempo l√≠mite (ej: 2 horas antes)

    <Warning>
    Esta funcionalidad puede estar o no disponible dependiendo de tu plan de suscripci√≥n.
    </Warning>
  </Accordion>
</AccordionGroup>

---

## Mejores Pr√°cticas

<Tip>
**Contacta al paciente antes de cancelar**: Siempre que sea posible, llama o env√≠a mensaje al paciente ANTES de cancelar su cita. Esto mejora la experiencia del cliente y reduce conflictos.
</Tip>

<Warning>
**No elimines citas, canc√©lalas**: Nunca intentes eliminar citas de la base de datos directamente. Siempre usa el bot√≥n "Cancelar Cita" para mantener el historial de auditor√≠a.
</Warning>

<Note>
**Registra siempre la raz√≥n**: Aunque es opcional, ingresar la raz√≥n de cancelaci√≥n ayuda a:
- Identificar patrones (ej: muchos pacientes cancelan por trabajo)
- Mejorar procesos (ej: ofrecer horarios m√°s flexibles)
- Generar reportes precisos
</Note>

<Info>
**Reagendar vs Cancelar + Crear**: Si un paciente quiere cambiar de fecha:
- **Usa "Modificar Cita"** (m√°s r√°pido, mantiene historial)
- **NO canceles y crees una nueva** (pierde el historial de cambios)

[Ver Modificar Cita](/appointments/modify-appointment)
</Info>

<Tip>
**Configura cierres con anticipaci√≥n**: Si sabes que vas a cerrar por vacaciones, festivos o d√≠as de descanso, config√∫ralos con al menos 2 semanas de anticipaci√≥n en **Configuraci√≥n ‚Üí Cierres**. Esto evita que pacientes agenden en d√≠as cerrados.
</Tip>

---

## Pr√≥ximos Pasos

Ahora que sabes c√≥mo cancelar citas correctamente, explora estas funcionalidades relacionadas:

<CardGroup cols={2}>
  <Card title="Crear Cita" icon="calendar-plus" href="/appointments/create-appointment">
    Aprende a agendar nuevas citas manualmente
  </Card>
  <Card title="Modificar Cita" icon="pen-to-square" href="/appointments/modify-appointment">
    Paso a paso para cambiar fecha, hora o servicio de una cita
  </Card>
  <Card title="Ver Calendario" icon="calendar" href="/appointments/view-calendar">
    Navega el calendario y filtra citas por proveedor, estado, etc.
  </Card>
  <Card title="Cierres Programados" icon="door-closed" href="/configuration/closures">
    Configura d√≠as festivos, vacaciones y cierres temporales
  </Card>
</CardGroup>

---

## Troubleshooting

<AccordionGroup>
  <Accordion title="No puedo cancelar una cita" icon="triangle-exclamation">
    **Posibles causas**:

    1. **No tienes permisos suficientes**
       - Solo usuarios con rol **Staff**, **Clinic Admin** o **System Admin** pueden cancelar citas
       - Soluci√≥n: Contacta a un administrador de la cl√≠nica

    2. **La cita ya est√° cancelada**
       - Verifica el estado de la cita en el modal de detalles
       - Si ya est√° en estado `CANCELLED`, no puedes cancelarla de nuevo

    3. **La cita ya est√° completada**
       - Las citas completadas tienen un flujo diferente
       - Soluci√≥n: Si necesitas corregir, contacta al administrador del sistema

    4. **Problema de conexi√≥n**
       - Verifica tu conexi√≥n a internet
       - Refresca la p√°gina e intenta de nuevo

    <Warning>
    Si el error persiste, contacta a soporte t√©cnico con el ID de la cita.
    </Warning>
  </Accordion>

  <Accordion title="La cita cancelada sigue apareciendo en el calendario" icon="calendar-xmark">
    **Soluci√≥n**:

    1. **Refresca el calendario**
       - Haz click en el bot√≥n **"Refrescar"** (üîÑ) en la esquina superior derecha
       - O presiona `F5` para recargar la p√°gina completa

    2. **Verifica los filtros**
       - Puede que el filtro est√© mostrando **"Todas las citas"** (incluidas las canceladas)
       - Cambia el filtro de estado a **"Active"** o **"Pending/Confirmed"** para ocultar las canceladas

    3. **Limpia la cach√© del navegador**
       - Si persiste, limpia la cach√© de tu navegador (`Ctrl + Shift + Delete`)

    <Note>
    Las citas canceladas permanecen en la base de datos (soft delete) pero NO deber√≠an aparecer en la vista por defecto del calendario.
    </Note>
  </Accordion>

  <Accordion title="El paciente no recibi√≥ la notificaci√≥n de cancelaci√≥n" icon="message-xmark">
    **Posibles causas**:

    1. **WhatsApp no est√° activo**
       - Verifica en **Configuraci√≥n ‚Üí WhatsApp** si est√° activado
       - Si no est√° activo, deber√°s contactar al paciente manualmente

    2. **N√∫mero incorrecto en formato E.164**
       - Verifica que el n√∫mero del paciente tenga formato `+[c√≥digo pa√≠s][n√∫mero]`
       - Ejemplo correcto: `+34612345678`

    3. **L√≠mite de mensajes Twilio**
       - Si enviaste muchos mensajes en poco tiempo, Twilio puede limitar
       - Espera 1 hora y verifica en **Logs ‚Üí Mensajes WhatsApp**

    4. **Per√≠odo de gracia expirado**
       - Twilio requiere que el paciente haya iniciado conversaci√≥n en las √∫ltimas 24 horas
       - Soluci√≥n: Contacta al paciente por otro medio (llamada, SMS)

    <Tip>
    Puedes verificar el estado de env√≠o del mensaje en **Logs ‚Üí Mensajes WhatsApp** (si tienes acceso).
    </Tip>
  </Accordion>

  <Accordion title="Cancel√© por error, ¬øpuedo recuperar la cita?" icon="rotate-left">
    **No**, pero puedes crear una nueva cita con los mismos datos:

    **Pasos**:
    1. Ve a **Citas ‚Üí Nueva Cita**
    2. Ingresa los mismos datos que ten√≠a la cita cancelada:
       - Paciente (mismo nombre y tel√©fono)
       - Servicio (mismo servicio)
       - Fecha y hora (misma fecha/hora, si sigue disponible)
       - Proveedor (mismo proveedor)
    3. Crea la cita normalmente

    **Limitaciones**:
    - ‚ùå El ID de la cita ser√° diferente
    - ‚ùå El historial de la cita anterior no se transferir√°
    - ‚úÖ Pero funcionar√° como una cita nueva normal

    <Warning>
    Ten cuidado al cancelar citas. Revisa bien antes de confirmar la cancelaci√≥n para evitar errores.
    </Warning>
  </Accordion>
</AccordionGroup>
