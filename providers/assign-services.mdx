---
title: 'Asignar Servicios a Proveedores'
description: 'Vincula proveedores a los servicios que ofrecen para una programación especializada'
icon: 'briefcase-medical'
---

## Resumen

La asignación de servicios vincula a los proveedores con los servicios que pueden ofrecer. Esto permite:
- **Programación especializada**: Mostrar solo la disponibilidad de proveedores que ofrecen el servicio solicitado
- **Filtrado de proveedores**: Los pacientes pueden seleccionar proveedores específicos al reservar
- **Disponibilidad basada en servicios**: El sistema calcula la disponibilidad según el horario del proveedor Y la asignación del servicio

<Info>
  **Asignación por Servicio**: Cada servicio puede tener UN proveedor asignado. Si varios proveedores ofrecen el mismo servicio (ej: "Consulta General"), crea entradas de servicio separadas para cada proveedor.
</Info>

## Requisitos Previos

<Steps>
  <Step title="Servicios Creados">
    Los servicios deben existir antes de la asignación. Ver [Crear Servicio](/services/create-service).
  </Step>
  <Step title="Proveedor Configurado">
    El proveedor debe tener `is_provider = true` y horarios de trabajo configurados.
  </Step>
  <Step title="Permisos Requeridos">
    Debes tener el rol `CLINIC_ADMIN` para asignar servicios.
  </Step>
</Steps>

## Arquitectura de Asignación de Servicios

<Warning>
  **Un Proveedor por Servicio**: Cada servicio solo puede asignarse a un proveedor a la vez. Si varios proveedores ofrecen el mismo servicio, crea entradas de servicio separadas.
</Warning>

## Método 1: Asignar Durante la Creación del Servicio

Al crear un nuevo servicio, puedes asignarlo inmediatamente a un proveedor.

<Steps>
  <Step title="Navegar a Servicios">
    Ve a **Servicios** desde el menú principal.
  </Step>
  <Step title="Clic en Crear Servicio">
    Haz clic en el botón **Crear Servicio**.
  </Step>
  <Step title="Completar Detalles del Servicio">
    - **Nombre**: Nombre del servicio (ej: "Corte de Cabello", "Limpieza Dental")
    - **Duración**: Duración del servicio en minutos (ej: 30, 60)
    - **Precio**: Precio del servicio (opcional)
  </Step>
  <Step title="Seleccionar Proveedor">
    En el menú desplegable **Proveedor**, selecciona el proveedor que ofrecerá este servicio.
  </Step>
  <Step title="Guardar Servicio">
    Haz clic en **Crear** para guardar el servicio con la asignación del proveedor.
  </Step>
</Steps>

### Confirmación

El sistema confirmará la creación del servicio con todos los detalles asignados, incluido el nombre del proveedor.

<Tip>
  **Convención de Nomenclatura**: Incluye el nombre del proveedor en el nombre del servicio cuando varios proveedores ofrecen el mismo servicio (ej: "Corte de Cabello - Dr. García", "Corte de Cabello - Dr. López"). Esto ayuda a los pacientes a distinguir entre opciones.
</Tip>

## Método 2: Asignar a Servicio Existente

Para asignar un proveedor a un servicio existente:

<Steps>
  <Step title="Navegar a Servicios">
    Ve a **Servicios** desde el menú principal.
  </Step>
  <Step title="Encontrar el Servicio">
    Localiza el servicio en la lista (usa la búsqueda si es necesario).
  </Step>
  <Step title="Clic en Editar">
    Haz clic en el ícono de editar en la tarjeta del servicio.
  </Step>
  <Step title="Seleccionar Proveedor">
    En el menú desplegable **Proveedor**, selecciona el proveedor a asignar.
  </Step>
  <Step title="Guardar Cambios">
    Haz clic en **Guardar** para actualizar el servicio.
  </Step>
</Steps>


## Método 3: Asignación Masiva desde Vista de Proveedor

Asigna múltiples servicios a un proveedor desde la vista de detalles del proveedor.

<Steps>
  <Step title="Navegar a Proveedores">
    Ve a **Proveedores** desde el menú principal.
  </Step>
  <Step title="Abrir Detalles del Proveedor">
    Haz clic en la tarjeta del proveedor para abrir su modal de detalles.
  </Step>
  <Step title="Ir a Pestaña de Servicios">
    Haz clic en la pestaña **Servicios**.
  </Step>
  <Step title="Clic en Asignar Servicios">
    Haz clic en el botón **Asignar Servicios**.
  </Step>
  <Step title="Seleccionar Servicios">
    Marca los servicios a asignar a este proveedor (selección múltiple).
  </Step>
  <Step title="Guardar Asignaciones">
    Haz clic en **Guardar** para actualizar todos los servicios seleccionados.
  </Step>
</Steps>

<Frame>
  <img src="/images/screenshots/providers_assign_services.png" alt="Interfaz de asignación de servicios a proveedor con selección múltiple" />
</Frame>

<Info>
  **Asignación Masiva**: Este método actualiza el campo `provider_id` para todos los servicios seleccionados en una sola transacción.
</Info>

## Desasignar Servicios

Para eliminar un proveedor de un servicio:

<Steps>
  <Step title="Abrir Diálogo de Edición de Servicio">
    Navega al servicio y haz clic en **Editar**.
  </Step>
  <Step title="Limpiar Selección de Proveedor">
    En el menú desplegable **Proveedor**, selecciona **"Ninguno"** o **"Cualquier Proveedor"**.
  </Step>
  <Step title="Guardar Cambios">
    Haz clic en **Guardar** para eliminar la asignación.
  </Step>
</Steps>


<Warning>
  **Impacto en la Disponibilidad**: Eliminar la asignación del proveedor cambia el cálculo de disponibilidad. Si el servicio tenía franjas específicas del proveedor, ahora se calcularán usando la disponibilidad a nivel de clínica (cualquier proveedor).
</Warning>

## Cómo Afecta la Asignación de Servicios a la Disponibilidad

### Escenario 1: Servicio con Proveedor Asignado

**Configuración**:
- Servicio: "Limpieza Dental" (30 min, asignado a Dr. García)
- Horario de trabajo Dr. García: Lunes 09:00-17:00
- Horario de clínica: Lunes 08:00-20:00

**Cálculo de Disponibilidad**:
1. El sistema obtiene el horario del Dr. García (09:00-17:00)
2. Intersecta con el horario de clínica (08:00-20:00)
3. Disponibilidad efectiva: 09:00-17:00
4. Genera franjas: 09:00, 09:30, 10:00, ..., 16:30

**Resultado**: Solo se muestra la disponibilidad del Dr. García. Otros proveedores se ignoran.

### Escenario 2: Servicio Sin Proveedor Asignado

**Configuración**:
- Servicio: "Consulta General" (30 min, SIN proveedor asignado)
- Múltiples proveedores disponibles

**Cálculo de Disponibilidad**:
1. El sistema obtiene TODOS los proveedores con horarios de trabajo
2. Genera disponibilidad a través de todos los proveedores
3. El paciente puede reservar con cualquier proveedor disponible

**Resultado**: Máxima disponibilidad (unión de todos los horarios de proveedores).

<Tip>
  **Cuándo Usar Servicios Sin Asignar**: Usa servicios sin asignar para servicios generales donde cualquier proveedor puede atender (ej: "Cita de Recepción", "Retiro de Documentos"). Usa servicios asignados para servicios especializados (ej: "Consulta de Ortodoncia - Dr. Especialista").
</Tip>

### Escenario 3: Múltiples Servicios, Mismo Proveedor

**Configuración**:
- Servicio A: "Corte de Cabello" (30 min, asignado a Dr. García)
- Servicio B: "Tinte de Cabello" (60 min, asignado a Dr. García)
- Horario de trabajo Dr. García: Lunes 09:00-17:00

**Cálculo de Disponibilidad**:
- **Para Corte de Cabello**: Franjas a las 09:00, 09:30, 10:00, ..., 16:30 (duración 30 min)
- **Para Tinte de Cabello**: Franjas a las 09:00, 10:00, 11:00, ..., 16:00 (duración 60 min, necesita ventana continua de 60 min)

**Resultado**: Mismo proveedor, diferentes patrones de franjas según la duración del servicio.

## Mejores Prácticas de Asignación de Servicios

<AccordionGroup>
  <Accordion title="Proveedores Especializados">
    **Caso de Uso**: Clínica dental con dentistas generales y ortodoncistas.

    **Patrón**:
    - Servicio: "Limpieza Dental" → Asignado a dentistas generales (crear servicios separados por dentista)
    - Servicio: "Consulta de Ortodoncia" → Asignado a ortodoncista especialista
    - Servicio: "Visita de Emergencia" → SIN asignación (cualquier proveedor puede atender)

    **Beneficio**: Los pacientes obtienen automáticamente al especialista correcto sin filtrado manual.
  </Accordion>

  <Accordion title="Proveedores de Medio Tiempo">
    **Caso de Uso**: Proveedor trabaja solo por las mañanas (09:00-13:00).

    **Patrón**:
    - Asignar servicios especializados a este proveedor
    - El sistema automáticamente limita la disponibilidad a franjas matutinas
    - No es necesario filtrar manualmente por hora del día

    **Beneficio**: La disponibilidad se calcula según el horario real del proveedor.
  </Accordion>

  <Accordion title="Servicios Multi-Proveedor">
    **Caso de Uso**: Múltiples proveedores ofrecen el mismo servicio (ej: "Corte de Cabello").

    **Patrón**:
    - Crear servicios separados: "Corte de Cabello - Dr. García", "Corte de Cabello - Dr. López"
    - Asignar cada uno al proveedor respectivo
    - Los pacientes pueden elegir su proveedor preferido

    **Alternativa**: Crear UN servicio sin asignar "Corte de Cabello" y permitir que los pacientes reserven con cualquier proveedor disponible (sin preferencia de proveedor).
  </Accordion>

  <Accordion title="Proveedor de Licencia">
    **Caso de Uso**: Proveedor está de vacaciones por 2 semanas.

    **Patrón**:
    - NO desasignar servicios
    - Crear un **cierre específico de proveedor** para el período de vacaciones
    - El sistema automáticamente excluye la disponibilidad de este proveedor durante el cierre
    - Los servicios permanecen asignados, la disponibilidad se reanuda después de que termine el cierre

    **Beneficio**: No se necesita reasignación manual.
  </Accordion>
</AccordionGroup>

## Ver Asignaciones de Servicios

### Desde la Lista de Servicios

Cada tarjeta de servicio muestra el proveedor asignado (si lo hay):

```
┌─────────────────────────────────────┐
│ Corte de Cabello - Dr. García       │
│ Duración: 30 min | Precio: €25      │
│ Proveedor: Dr. María García         │
│ [Editar] [Eliminar]                 │
└─────────────────────────────────────┘
```

### Desde la Vista de Proveedor

La pestaña de Servicios del proveedor lista todos los servicios asignados a ellos:

```
┌─────────────────────────────────────┐
│ Dr. María García - Servicios        │
├─────────────────────────────────────┤
│ ✓ Corte de Cabello (30 min)        │
│ ✓ Tinte de Cabello (60 min)        │
│ ✓ Tratamiento Capilar (45 min)     │
│                                     │
│ [Asignar Más Servicios]             │
└─────────────────────────────────────┘
```

### Ver Servicios por Proveedor

Puedes filtrar servicios por proveedor para ver todos los servicios asignados a un proveedor específico. Esta vista muestra detalles del servicio incluyendo nombre, duración y precio.

## Errores Comunes

<AccordionGroup>
  <Accordion title="403 Forbidden - Cannot Manage Clinic">
    **Causa**: No tienes el rol `CLINIC_ADMIN` en la clínica seleccionada.

    **Solución**: Contacta a tu administrador del sistema para que te otorgue permisos `CLINIC_ADMIN`.
  </Accordion>

  <Accordion title="404 Not Found - Provider Not Found">
    **Causa**: El `provider_id` no existe o el usuario no es un proveedor en esta clínica.

    **Solución**: Contacta a soporte para verificar que la configuración del proveedor sea correcta para esta clínica.
  </Accordion>

  <Accordion title="400 Bad Request - Service Already Assigned">
    **Causa**: Intentando asignar un servicio que ya está asignado a otro proveedor.

    **Solución**:
    1. Si quieres reasignar: Usa PATCH para actualizar el `provider_id` del servicio existente
    2. Si quieres múltiples proveedores: Crea entradas de servicio separadas (ej: "Corte - Dr. A", "Corte - Dr. B")
  </Accordion>

  <Accordion title="Provider Has Services But No Availability">
    **Causa**: El proveedor tiene servicios asignados pero no tiene horarios de trabajo configurados.

    **Solución**: Navega a [Configurar Horario](/providers/configure-schedule) para agregar horarios de trabajo al proveedor.
  </Accordion>
</AccordionGroup>

## Cómo Afecta a las Citas

Cuando asignas un proveedor a un servicio:

<Steps>
  <Step title="Disponibilidad Filtrada">
    Solo se mostrarán los horarios disponibles del proveedor asignado para ese servicio específico.
  </Step>

  <Step title="Reserva Automática">
    Cuando un paciente reserva ese servicio (por WhatsApp o manualmente), la cita se crea automáticamente con el proveedor asignado.
  </Step>

  <Step title="Optimización de Agenda">
    Cada proveedor solo verá citas de sus servicios asignados, simplificando la gestión de su calendario.
  </Step>
</Steps>

<Info>
**Múltiples proveedores para el mismo servicio**: Si varios proveedores ofrecen el mismo servicio (ej: "Consulta General"), crea entradas separadas del servicio para cada proveedor (ej: "Consulta General - Dr. García", "Consulta General - Dr. López").
</Info>

## Próximos Pasos

<CardGroup cols={2}>
  <Card title="Probar Disponibilidad" icon="calendar-check" href="/scheduling/test-availability">
    Verifica que la disponibilidad del proveedor aparezca correctamente para los servicios asignados
  </Card>
  <Card title="Crear Cita" icon="calendar-plus" href="/appointments/create-appointment">
    Reserva una cita de prueba con el proveedor asignado
  </Card>
  <Card title="Gestionar Cierres" icon="door-closed" href="/scheduling/closures">
    Configura cierres específicos de proveedor para vacaciones o licencias
  </Card>
  <Card title="Ver Servicios" icon="list" href="/services/view-services">
    Regresa a la lista de servicios para ver todas las asignaciones
  </Card>
</CardGroup>
